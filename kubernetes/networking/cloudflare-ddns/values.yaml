---
app-template:
  controller:
    type: cronjob
    cronjob:
      concurrencyPolicy: Forbid
      schedule: "@hourly"
  restartPolicy: OnFailure
  image:
    repository: ghcr.io/onedr0p/kubernetes-kubectl
    tag: 1.26.0@sha256:0e4be5e6ba3dbb0f12896796da78988136460bb6f027d79e51300a19a021c92a
  command: ["/bin/bash", "/app/cloudflare-ddns.sh"]
  envFrom:
    - secretRef:
        name: cloudflare-ddns-secret
  service:
    main:
      enabled: false
  persistence:
    config:
      enabled: true
      type: secret
      name: cloudflare-ddns-configmap
      subPath: cloudflare-ddns.sh
      mountPath: /app/cloudflare-ddns.sh
      defaultMode: 0775
      readOnly: true
